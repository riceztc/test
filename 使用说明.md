# 小程序运行指南

## 解决 "Foundation.onLoad is not a function" 错误

这个错误通常是因为缺少页面配置文件导致的。现在已经修复，请按以下步骤操作：

## 🔧 完整运行步骤

### 1. 基础准备
1. 下载并安装**微信开发者工具**
2. 注册微信小程序账号（如果没有）
3. 用微信开发者工具**打开项目文件夹**

### 2. 配置项目
1. 在微信开发者工具中，点击右上角"详情"
2. 修改 `AppID` 为你自己的小程序 AppID（如果没有可以选择测试号）
3. 确认项目设置正确

### 3. 开通云开发
1. 在微信开发者工具中，点击工具栏的"云开发"
2. 选择"开通云开发"
3. 创建环境（选择"按量付费"或"免费额度"）
4. **记住你的环境ID**（类似：cloud1-xxxxx）

### 4. 更新环境配置
1. 打开 `app.js` 文件
2. 找到 `env: 'test-env'` 这一行
3. 将 `'test-env'` 替换为你刚创建的**真实环境ID**

```javascript
wx.cloud.init({
  env: '你的真实环境ID', // 例如：cloud1-6gjyjg4p7776e793
  traceUser: true,
})
```

### 5. 上传云函数
1. 在开发者工具左侧文件树中，右键点击 `cloudfunctions` 文件夹
2. 选择"上传并部署：云端安装依赖"
3. 等待所有云函数上传完成

### 6. 创建数据库集合
1. 点击工具栏"云开发" → "数据库"
2. 点击"新建集合"
3. 集合名称填写：`bills`
4. 权限设置：选择"所有用户可读，仅创建者可写"
5. 点击确定

### 7. 运行项目
1. 点击开发者工具顶部的"编译"
2. 在模拟器中查看效果
3. 如果仍有错误，请查看控制台输出

## 🚨 常见问题

### 问题1: 云函数调用失败
**解决方案**: 
- 确保云函数已正确上传
- 检查 `app.js` 中的环境ID是否正确
- 确保云开发环境已开通

### 问题2: 数据库操作失败
**解决方案**:
- 确保已创建 `bills` 集合
- 检查集合权限设置
- 确保环境ID正确

### 问题3: 页面加载失败
**解决方案**:
- 检查 `project.config.json` 中的页面路径是否正确
- 确保每个页面都有对应的 `.json` 配置文件

## 🧪 测试功能

如果云函数暂时无法使用，项目已经内置了模拟数据，可以正常查看界面效果：

1. **首页**: 显示模拟的今日支出统计
2. **列表页**: 显示模拟的账单数据
3. **详情页**: 可以正常打开，查看界面效果

## 📱 功能测试

成功运行后，你可以测试：
- ✅ 页面跳转
- ✅ 界面显示
- ✅ 表单交互
- 📝 数据增删改查（需云函数正常）
- 📊 统计功能（需云函数正常）

## 💡 学习重点

通过这个项目，你可以理解：

1. **小程序结构**: 页面、配置、组件的组织方式
2. **前端开发**: WXML、WXSS、JavaScript 的使用
3. **后端开发**: 云函数的编写和调用
4. **数据交互**: 前后端如何通过 API 进行数据交换
5. **错误处理**: 异步操作和错误处理机制

遇到任何问题，请查看开发者工具的控制台输出，通常会有详细的错误信息！